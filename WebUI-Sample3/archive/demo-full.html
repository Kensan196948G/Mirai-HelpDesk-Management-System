<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mirai HelpDesk - ãƒãƒ«ãƒAIçµ±åˆãƒ‡ãƒ¢</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/sample-data.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <span class="logo-icon">ğŸ¤–</span>
                    <h1>Mirai HelpDesk</h1>
                </div>
                <p class="subtitle">ãƒãƒ«ãƒAIçµ±åˆãƒ‡ãƒ¢</p>
            </div>

            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-page="dashboard">
                    <span class="nav-icon">ğŸ“Š</span>
                    <span class="nav-label">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</span>
                </a>
                <a href="#" class="nav-item" data-page="tickets">
                    <span class="nav-icon">ğŸ«</span>
                    <span class="nav-label">ãƒã‚±ãƒƒãƒˆç®¡ç†</span>
                    <span class="badge">50</span>
                </a>
                <a href="#" class="nav-item" data-page="ai-assistant">
                    <span class="nav-icon">ğŸ¤–</span>
                    <span class="nav-label">AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ</span>
                    <span class="badge">NEW</span>
                </a>
                <a href="#" class="nav-item" data-page="ai-knowledge">
                    <span class="nav-icon">âœ¨</span>
                    <span class="nav-label">AIè‡ªå‹•ç”Ÿæˆ</span>
                    <span class="badge">AI</span>
                </a>
                <a href="#" class="nav-item" data-page="knowledge">
                    <span class="nav-icon">ğŸ“š</span>
                    <span class="nav-label">ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹</span>
                    <span class="badge">30</span>
                </a>
                <a href="#" class="nav-item" data-page="approvals">
                    <span class="nav-icon">âœ…</span>
                    <span class="nav-label">æ‰¿èªç®¡ç†</span>
                    <span class="badge">3</span>
                </a>
                <a href="#" class="nav-item" data-page="m365">
                    <span class="nav-icon">ğŸ”§</span>
                    <span class="nav-label">M365æ“ä½œ</span>
                </a>
            </nav>

            <div class="sidebar-footer">
                <div style="padding: 12px; background: rgba(255,255,255,0.1); border-radius: var(--radius); margin-bottom: 12px;">
                    <div style="font-size: 11px; opacity: 0.7; margin-bottom: 8px;">ãƒãƒ«ãƒAIã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</div>
                    <div class="ai-status">
                        <div class="ai-status-item">
                            <span class="ai-indicator active"></span>
                            <span>Claude (çµ±åˆ)</span>
                        </div>
                        <div class="ai-status-item">
                            <span class="ai-indicator active"></span>
                            <span>Gemini (åé›†)</span>
                        </div>
                        <div class="ai-status-item">
                            <span class="ai-indicator active"></span>
                            <span>Perplexity (æ ¹æ‹ )</span>
                        </div>
                    </div>
                </div>
                <div style="font-size: 10px; opacity: 0.5; text-align: center;">
                    v1.0.0 | 2026-01-24
                </div>
            </div>
        </aside>

        <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
        <main class="main-content">
            <header class="header">
                <div class="header-left">
                    <h2 class="page-title" id="page-title">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h2>
                </div>
                <div class="header-right">
                    <button class="btn btn-icon" title="é€šçŸ¥">
                        <span>ğŸ””</span>
                        <span class="badge badge-sm">3</span>
                    </button>
                    <div class="user-menu">
                        <div class="user-avatar">ä½</div>
                        <div class="user-info">
                            <div class="user-name">ä½è—¤èŠ±å­</div>
                            <div class="user-role">Agent</div>
                        </div>
                    </div>
                </div>
            </header>

            <div class="content" id="main-content">
                <!-- ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ -->
            </div>
        </main>
    </div>

    <!-- ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="modal-overlay" class="modal-overlay"></div>

    <script src="js/ai-orchestration.js"></script>
    <script src="js/app.js"></script>

    <script>
        // ãƒšãƒ¼ã‚¸ã‚’èª­ã¿è¾¼ã¿æ™‚ã«è‡ªå‹•è¡¨ç¤º
        document.addEventListener('DOMContentLoaded', () => {
            loadPage('dashboard');
        });

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿
        async function loadPage(pageName) {
            const content = document.getElementById('main-content');
            content.innerHTML = '<div style="text-align: center; padding: 40px;"><div class="loading"></div></div>';

            try {
                let html = '';

                if (pageName === 'dashboard') {
                    html = await renderDashboard();
                } else if (pageName === 'ai-assistant') {
                    html = renderAIAssistant();
                } else if (pageName === 'tickets') {
                    html = renderTickets();
                } else if (pageName === 'ai-knowledge') {
                    html = renderAIKnowledge();
                } else if (pageName === 'knowledge') {
                    html = renderKnowledge();
                } else if (pageName === 'approvals') {
                    html = renderApprovals();
                } else if (pageName === 'm365') {
                    html = renderM365();
                }

                content.innerHTML = html;
            } catch (error) {
                content.innerHTML = `<div class="card"><p style="color: var(--error);">ã‚¨ãƒ©ãƒ¼: ${error.message}</p></div>`;
            }
        }

        // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
        function navigateTo(page) {
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.page === page) {
                    item.classList.add('active');
                }
            });

            const titles = {
                'dashboard': 'ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰',
                'tickets': 'ãƒã‚±ãƒƒãƒˆç®¡ç†',
                'ai-assistant': 'AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ',
                'ai-knowledge': 'AIè‡ªå‹•ç”ŸæˆãƒŠãƒ¬ãƒƒã‚¸',
                'knowledge': 'ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹',
                'approvals': 'æ‰¿èªç®¡ç†',
                'm365': 'M365æ“ä½œ',
            };
            document.getElementById('page-title').textContent = titles[page] || page;

            loadPage(page);
        }

        // ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        async function renderDashboard() {
            const total = SAMPLE_TICKETS.length;
            const stats = {
                new: SAMPLE_TICKETS.filter(t => t.status === 'New').length,
                progress: SAMPLE_TICKETS.filter(t => t.status === 'In Progress').length,
                resolved: SAMPLE_TICKETS.filter(t => t.status === 'Resolved').length,
                ai: SAMPLE_TICKETS.filter(t => t.ai_processed).length,
            };

            return `
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">å…¨ãƒã‚±ãƒƒãƒˆ</div>
                        <div class="stat-value" style="color: var(--primary);">${total}</div>
                        <div class="stat-trend">ğŸ“ˆ å‰é€±æ¯” +12%</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">æ–°è¦</div>
                        <div class="stat-value" style="color: var(--warning);">${stats.new}</div>
                        <div class="stat-trend">ğŸ”¥ å¯¾å¿œå¾…ã¡</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">å¯¾å¿œä¸­</div>
                        <div class="stat-value" style="color: #722ed1;">${stats.progress}</div>
                        <div class="stat-trend">âš¡ å‡¦ç†ä¸­</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">è§£æ±ºæ¸ˆã¿</div>
                        <div class="stat-value" style="color: var(--success);">${stats.resolved}</div>
                        <div class="stat-trend">âœ… å®Œäº†</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">ğŸ¤– ãƒãƒ«ãƒAIçµ±è¨ˆ</h3>
                    </div>
                    <div class="stats-grid" style="grid-template-columns: repeat(3, 1fr);">
                        <div class="stat-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                            <div class="stat-label" style="color: rgba(255,255,255,0.9);">AIå‡¦ç†æ¸ˆã¿ãƒã‚±ãƒƒãƒˆ</div>
                            <div class="stat-value">${stats.ai}</div>
                            <div class="stat-trend" style="color: rgba(255,255,255,0.9);">ğŸ“Š ${Math.round((stats.ai/total)*100)}%</div>
                        </div>
                        <div class="stat-card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">
                            <div class="stat-label" style="color: rgba(255,255,255,0.9);">AIç”ŸæˆãƒŠãƒ¬ãƒƒã‚¸</div>
                            <div class="stat-value">${SAMPLE_KNOWLEDGE.filter(k => k.is_ai_generated).length}</div>
                            <div class="stat-trend" style="color: rgba(255,255,255,0.9);">âœ¨ å“è³ªå¹³å‡ ${AI_STATS.averageQualityScore}%</div>
                        </div>
                        <div class="stat-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white;">
                            <div class="stat-label" style="color: rgba(255,255,255,0.9);">è‡ªå‹•åŒ–æˆåŠŸç‡</div>
                            <div class="stat-value">${AI_STATS.automationSuccessRate}%</div>
                            <div class="stat-trend" style="color: rgba(255,255,255,0.9);">ğŸ¯ å‡¦ç†${AI_STATS.averageProcessingTime}ç§’</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">æœ€è¿‘ã®ãƒã‚±ãƒƒãƒˆ</h3>
                        <button class="btn btn-primary" onclick="navigateTo('tickets')">ã™ã¹ã¦è¡¨ç¤º</button>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>ä»¶å</th>
                                    <th>å„ªå…ˆåº¦</th>
                                    <th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
                                    <th>ITSM</th>
                                    <th>AI</th>
                                    <th>ä½œæˆ</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${SAMPLE_TICKETS.slice(0, 10).map(t => `
                                    <tr onclick="viewTicket('${t.ticket_id}')">
                                        <td>#${t.ticket_number}</td>
                                        <td style="max-width: 300px; overflow: hidden; text-overflow: ellipsis;">${t.subject}</td>
                                        <td><span class="tag tag-${t.priority.toLowerCase()}">${t.priority}</span></td>
                                        <td><span class="tag tag-${t.status.toLowerCase().replace(/ /g, '-')}">${t.status}</span></td>
                                        <td><span class="tag">${ITSM_TYPES[t.itsm_type].icon}</span></td>
                                        <td>${t.ai_processed ? 'ğŸ¤–' : '-'}</td>
                                        <td style="font-size: 12px;">${new Date(t.created_at).toLocaleString('ja-JP', { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' })}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
        }

        // AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        function renderAIAssistant() {
            return `
                <div class="ai-panel">
                    <h2 style="margin-bottom: 8px;">ğŸ¤– ãƒãƒ«ãƒAIã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h2>
                    <p style="opacity: 0.9; margin-bottom: 24px;">
                        Claudeï¼ˆçµ±åˆï¼‰ã€Geminiï¼ˆåé›†ï¼‰ã€Perplexityï¼ˆæ ¹æ‹ ï¼‰ã‚’çµ„ã¿åˆã‚ã›ã¦æœ€é©ãªå›ç­”ã‚’ç”Ÿæˆ
                    </p>

                    <div class="ai-selector">
                        <div class="ai-option selected" data-ai="CLAUDE">
                            <div class="ai-option-icon">ğŸ§ </div>
                            <div class="ai-option-name">Claude</div>
                            <div class="ai-option-desc">ä¸€æ¬¡åˆ¤æ–­ãƒ»æœ€çµ‚çµ±åˆ</div>
                        </div>
                        <div class="ai-option" data-ai="GEMINI">
                            <div class="ai-option-icon">ğŸ”</div>
                            <div class="ai-option-name">Gemini</div>
                            <div class="ai-option-desc">æƒ…å ±åé›†</div>
                        </div>
                        <div class="ai-option" data-ai="PERPLEXITY">
                            <div class="ai-option-icon">ğŸŒ</div>
                            <div class="ai-option-name">Perplexity</div>
                            <div class="ai-option-desc">æ ¹æ‹ ç”Ÿæˆ</div>
                        </div>
                    </div>

                    <div class="query-input-wrapper">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--gray-800);">
                            ğŸ’¬ å•ã„åˆã‚ã›å†…å®¹
                        </label>
                        <textarea id="ai-query" class="query-input" placeholder="ä¾‹: PCãŒèµ·å‹•ã—ã¾ã›ã‚“ã€‚ã©ã†ã™ã‚Œã°ã„ã„ã§ã™ã‹ï¼Ÿ">PCãŒèµ·å‹•ã—ã¾ã›ã‚“ã€‚ã©ã†ã™ã‚Œã°ã„ã„ã§ã™ã‹ï¼Ÿ</textarea>

                        <div style="margin-top: 16px;">
                            <button class="btn btn-primary" onclick="processAIQuery()" style="width: 100%; padding: 14px;">
                                ğŸš€ ãƒãƒ«ãƒAIå‡¦ç†ã‚’å®Ÿè¡Œï¼ˆãƒ‡ãƒ¢ï¼‰
                            </button>
                        </div>

                        <div style="margin-top: 12px; padding: 12px; background: rgba(255,255,255,0.3); border-radius: 4px; font-size: 12px;">
                            ğŸ’¡ <strong>ãƒ‡ãƒ¢:</strong> ä¸Šè¨˜ã®ã‚µãƒ³ãƒ—ãƒ«ã‚¯ã‚¨ãƒªã§ã€3ã¤ã®AIã¨7ã¤ã®SubAgentã®ä¸¦åˆ—å‡¦ç†ã‚’ä½“é¨“ã§ãã¾ã™ï¼
                        </div>
                    </div>

                    <div style="margin-top: 20px;">
                        <h4 style="margin-bottom: 12px; font-size: 14px;">ğŸ¯ 7ã¤ã®SubAgentä¸¦åˆ—å‡¦ç†</h4>
                        <div class="subagent-grid" id="subagent-grid">
                            ${Object.entries(SUB_AGENTS).map(([key, agent]) => `
                                <div class="subagent-item" id="subagent-${key}">
                                    <div class="subagent-icon">${agent.icon}</div>
                                    <div style="font-weight: 600; font-size: 10px;">${agent.name.replace('Knowledge', 'K.')}</div>
                                    <div style="font-size: 9px; opacity: 0.8; margin-top: 2px;">${agent.role.substring(0, 10)}...</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>

                <div id="ai-result-container" class="hidden"></div>
            `;
        }

        // AIå‡¦ç†å®Ÿè¡Œï¼ˆãƒ‡ãƒ¢ï¼‰
        async function processAIQuery() {
            const query = document.getElementById('ai-query').value.trim();
            if (!query) {
                alert('å•ã„åˆã‚ã›å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            // SubAgentã‚’å‡¦ç†ä¸­çŠ¶æ…‹ã«
            Object.keys(SUB_AGENTS).forEach(key => {
                document.getElementById(`subagent-${key}`).className = 'subagent-item processing';
            });

            // å‡¦ç†ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå„SubAgentã‚’é †æ¬¡å®Œäº†ï¼‰
            for (const [key, agent] of Object.entries(SUB_AGENTS)) {
                await new Promise(resolve => setTimeout(resolve, 300));
                document.getElementById(`subagent-${key}`).className = 'subagent-item completed';
            }

            // ã‚µãƒ³ãƒ—ãƒ«çµæœã‚’è¡¨ç¤º
            const sampleResult = SAMPLE_AI_RESULTS[query] || createGenericResult(query);
            displayAIResult(sampleResult, query);
        }

        // æ±ç”¨AIçµæœç”Ÿæˆ
        function createGenericResult(query) {
            return {
                queryType: 'FAQ',
                itsmType: 'INCIDENT',
                processingTime: 2400,
                qualityScore: { overall: 88, completeness: 90, accuracy: 86, relevance: 88 },
                answer: {
                    summary: `ã€Œ${query}ã€ã«ã¤ã„ã¦å›ç­”ã—ã¾ã™ã€‚ã“ã®å•é¡Œã¯ä¸€èˆ¬çš„ãªãƒˆãƒ©ãƒ–ãƒ«ã§ã‚ã‚Šã€ä»¥ä¸‹ã®æ‰‹é †ã§è§£æ±ºã§ãã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã§ã™ã€‚`,
                    technicalSummary: 'ã€æŠ€è¡“è€…å‘ã‘ã€‘ã‚·ã‚¹ãƒ†ãƒ ãƒ­ã‚°ã‚’ç¢ºèªã—ã€ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã‚’ç‰¹å®šã—ã¦ãã ã•ã„ã€‚',
                    userSummary: 'ã€ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ã€‘ã¾ãšã€å†èµ·å‹•ã‚’è©¦ã—ã¦ãã ã•ã„ã€‚',
                    preventiveMeasures: 'å†ç™ºé˜²æ­¢ç­–: å®šæœŸçš„ãªãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’æ¨å¥¨ã—ã¾ã™ã€‚',
                    improvementSuggestions: 'æ”¹å–„ææ¡ˆ: è‡ªå‹•è¨ºæ–­ãƒ„ãƒ¼ãƒ«ã®å°å…¥ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚',
                    automationPotential: 70,
                    sources: [
                        { title: 'å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ', url: 'https://docs.microsoft.com' },
                    ],
                },
                aiResponses: {
                    CLAUDE: {
                        model: 'Claude',
                        answer: `Claudeã«ã‚ˆã‚‹å›ç­”: ${query}ã«ã¤ã„ã¦åˆ†æã—ã¾ã™ã€‚`,
                        confidence: 92,
                        sources: [],
                    },
                },
            };
        }

        // AIçµæœè¡¨ç¤º
        function displayAIResult(result, query) {
            const container = document.getElementById('ai-result-container');
            container.className = 'result-container';

            const aiCount = result.aiResponses ? Object.keys(result.aiResponses).length : 1;

            container.innerHTML = `
                <div class="card-header">
                    <h3 class="card-title">ğŸ¯ ãƒãƒ«ãƒAIå‡¦ç†çµæœ</h3>
                    <div style="display: flex; gap: 12px;">
                        <span class="tag tag-ai">${aiCount}ã¤ã®AI</span>
                        <span class="tag">7ã¤ã®SubAgent</span>
                        <span class="tag tag-auto">â±ï¸ ${(result.processingTime/1000).toFixed(1)}ç§’</span>
                    </div>
                </div>

                <div class="quality-score">
                    <div class="score-item">
                        <div class="score-value">${result.qualityScore.overall}%</div>
                        <div class="score-label">ç·åˆå“è³ª</div>
                    </div>
                    <div class="score-item">
                        <div class="score-value">${result.qualityScore.completeness}%</div>
                        <div class="score-label">å®Œå…¨æ€§</div>
                    </div>
                    <div class="score-item">
                        <div class="score-value">${result.qualityScore.accuracy}%</div>
                        <div class="score-label">æ­£ç¢ºæ€§</div>
                    </div>
                    <div class="score-item">
                        <div class="score-value">${result.qualityScore.relevance}%</div>
                        <div class="score-label">é–¢é€£æ€§</div>
                    </div>
                </div>

                <div style="background: var(--gray-50); padding: 20px; border-radius: var(--radius-lg); margin-bottom: 20px;">
                    <h4 style="margin-bottom: 12px;">ğŸ’¡ çµ±åˆå›ç­”</h4>
                    <div style="line-height: 1.8; white-space: pre-wrap;">${result.answer.summary}</div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 20px;">
                    <div style="background: var(--gray-50); padding: 16px; border-radius: var(--radius);">
                        <h5 style="font-size: 14px; margin-bottom: 8px;">ğŸ”§ æŠ€è¡“è€…å‘ã‘</h5>
                        <p style="font-size: 13px; line-height: 1.6;">${result.answer.technicalSummary}</p>
                    </div>
                    <div style="background: var(--gray-50); padding: 16px; border-radius: var(--radius);">
                        <h5 style="font-size: 14px; margin-bottom: 8px;">ğŸ‘¤ ä¸€èˆ¬å‘ã‘</h5>
                        <p style="font-size: 13px; line-height: 1.6;">${result.answer.userSummary}</p>
                    </div>
                </div>

                <div style="background: var(--gray-50); padding: 16px; border-radius: var(--radius); margin-bottom: 16px;">
                    <h5 style="font-size: 14px; margin-bottom: 8px;">ğŸ›¡ï¸ å†ç™ºé˜²æ­¢ç­–</h5>
                    <p style="font-size: 13px; line-height: 1.6;">${result.answer.preventiveMeasures}</p>
                </div>

                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 16px; border-radius: var(--radius); margin-bottom: 16px;">
                    <h5 style="margin-bottom: 8px;">âš™ï¸ è‡ªå‹•åŒ–ææ¡ˆ</h5>
                    <p style="opacity: 0.95; font-size: 13px; margin-bottom: 12px;">${result.answer.improvementSuggestions}</p>
                    <div style="background: rgba(255,255,255,0.2); padding: 12px; border-radius: 4px; text-align: center;">
                        <div style="font-size: 24px; font-weight: 700;">${result.answer.automationPotential}%</div>
                        <div style="font-size: 11px; opacity: 0.9;">è‡ªå‹•åŒ–å¯èƒ½æ€§</div>
                    </div>
                </div>

                <h4 style="margin-bottom: 12px;">ğŸ“š å‚ç…§å…ƒãƒ»ã‚¨ãƒ“ãƒ‡ãƒ³ã‚¹</h4>
                <div style="display: flex; flex-direction: column; gap: 8px;">
                    ${result.answer.sources.map(source => `
                        <div style="background: var(--gray-50); padding: 12px; border-radius: var(--radius); display: flex; align-items: center; gap: 12px;">
                            <span style="font-size: 20px;">ğŸ”—</span>
                            <div>
                                <div style="font-weight: 600; font-size: 14px;">${source.title}</div>
                                <div style="font-size: 12px; color: var(--gray-500); margin-top: 2px;">
                                    <a href="${source.url}" target="_blank" style="color: var(--primary);">${source.url}</a>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // ãã®ä»–ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°é–¢æ•°ã¯çœç•¥ã—ã¦ã‚·ãƒ³ãƒ—ãƒ«ã«å®Ÿè£…
        function renderTickets() { return '<div class="card"><h3>ãƒã‚±ãƒƒãƒˆä¸€è¦§ - å®Ÿè£…ä¸­</h3><p>demo-full.htmlã§ã‚µãƒ³ãƒ—ãƒ«è¡¨ç¤ºä¸­</p></div>'; }
        function renderAIKnowledge() { return '<div class="card"><h3>AIè‡ªå‹•ç”Ÿæˆ - å®Ÿè£…ä¸­</h3></div>'; }
        function renderKnowledge() { return '<div class="card"><h3>ãƒŠãƒ¬ãƒƒã‚¸ - å®Ÿè£…ä¸­</h3></div>'; }
        function renderApprovals() { return '<div class="card"><h3>æ‰¿èªç®¡ç† - å®Ÿè£…ä¸­</h3></div>'; }
        function renderM365() { return '<div class="card"><h3>M365æ“ä½œ - å®Ÿè£…ä¸­</h3></div>'; }

        function viewTicket(id) { alert('ãƒã‚±ãƒƒãƒˆè©³ç´°: ' + id); }
        function closeModal() { document.getElementById('modal-overlay').className = 'modal-overlay'; }
    </script>
</body>
</html>
