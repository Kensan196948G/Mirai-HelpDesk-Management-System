<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IT HelpDesk - サポートポータル</title>
    <link rel="stylesheet" href="css/it-helpdesk.css">
</head>
<body>
    <div class="app-container">
        <!-- サイドバー -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                            <path d="M2 17l10 5 10-5"/>
                            <path d="M2 12l10 5 10-5"/>
                        </svg>
                    </div>
                    <div class="logo-text">
                        <span class="logo-title">IT HelpDesk</span>
                        <span class="logo-subtitle">Support Portal</span>
                    </div>
                </div>
            </div>

            <nav class="sidebar-nav">
                <div class="nav-section">
                    <span class="nav-section-title">メイン</span>
                    <a href="#" class="nav-item active" data-section="chat">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                        </svg>
                        <span>AIサポート</span>
                        <span class="nav-badge">New</span>
                    </a>
                    <a href="#" class="nav-item" data-section="tickets">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14 2 14 8 20 8"/>
                            <line x1="16" y1="13" x2="8" y2="13"/>
                            <line x1="16" y1="17" x2="8" y2="17"/>
                        </svg>
                        <span>マイチケット</span>
                        <span class="nav-count">3</span>
                    </a>
                    <a href="#" class="nav-item" data-section="faq">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                            <line x1="12" y1="17" x2="12.01" y2="17"/>
                        </svg>
                        <span>FAQ</span>
                    </a>
                </div>

                <div class="nav-section">
                    <span class="nav-section-title">カテゴリ</span>
                    <a href="#" class="nav-item category" onclick="selectCategory('network')">
                        <span class="category-dot network"></span>
                        <span>ネットワーク</span>
                    </a>
                    <a href="#" class="nav-item category" onclick="selectCategory('software')">
                        <span class="category-dot software"></span>
                        <span>ソフトウェア</span>
                    </a>
                    <a href="#" class="nav-item category" onclick="selectCategory('hardware')">
                        <span class="category-dot hardware"></span>
                        <span>ハードウェア</span>
                    </a>
                    <a href="#" class="nav-item category" onclick="selectCategory('security')">
                        <span class="category-dot security"></span>
                        <span>セキュリティ</span>
                    </a>
                    <a href="#" class="nav-item category" onclick="selectCategory('account')">
                        <span class="category-dot account"></span>
                        <span>アカウント</span>
                    </a>
                </div>
            </nav>

            <div class="sidebar-footer">
                <div class="system-status">
                    <div class="status-indicator online"></div>
                    <span>全システム稼働中</span>
                </div>
                <div class="user-card">
                    <div class="user-avatar">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23667085'%3E%3Cpath d='M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z'/%3E%3C/svg%3E" alt="User">
                    </div>
                    <div class="user-info">
                        <span class="user-name">Ken Aritoh</span>
                        <span class="user-dept">開発部</span>
                    </div>
                    <button class="user-menu-btn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="1"/><circle cx="12" cy="5" r="1"/><circle cx="12" cy="19" r="1"/>
                        </svg>
                    </button>
                </div>
            </div>
        </aside>

        <!-- メインコンテンツ -->
        <main class="main-content">
            <!-- ヘッダー -->
            <header class="main-header">
                <div class="header-left">
                    <h1>AIサポートチャット</h1>
                    <div class="breadcrumb">
                        <span>IT HelpDesk</span>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9 18 15 12 9 6"/>
                        </svg>
                        <span class="current">AIサポート</span>
                    </div>
                </div>
                <div class="header-right">
                    <button class="header-btn" title="新規チケット作成">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>
                        </svg>
                        <span>新規チケット</span>
                    </button>
                    <button class="header-icon-btn" title="通知">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                        </svg>
                        <span class="notification-badge">2</span>
                    </button>
                </div>
            </header>

            <!-- セクション: AIサポート -->
            <div class="section-content" id="section-chat">
            <div class="chat-area">
                <div class="chat-messages" id="chatMessages">
                    <!-- ウェルカムカード -->
                    <div class="welcome-card">
                        <div class="welcome-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                            </svg>
                        </div>
                        <h2>ITサポートへようこそ</h2>
                        <p>AIアシスタントが技術的な問題解決をサポートします。<br>質問を入力するか、下のトピックから選択してください。</p>

                        <div class="quick-topics">
                            <button class="topic-btn" onclick="selectTopic('wifi')">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M5 12.55a11 11 0 0 1 14.08 0"/>
                                    <path d="M1.42 9a16 16 0 0 1 21.16 0"/>
                                    <path d="M8.53 16.11a6 6 0 0 1 6.95 0"/>
                                    <line x1="12" y1="20" x2="12.01" y2="20"/>
                                </svg>
                                <span>WiFi接続</span>
                            </button>
                            <button class="topic-btn" onclick="selectTopic('vpn')">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                                    <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                                </svg>
                                <span>VPN設定</span>
                            </button>
                            <button class="topic-btn" onclick="selectTopic('password')">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/>
                                </svg>
                                <span>パスワード</span>
                            </button>
                            <button class="topic-btn" onclick="selectTopic('printer')">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="6 9 6 2 18 2 18 9"/>
                                    <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/>
                                    <rect x="6" y="14" width="12" height="8"/>
                                </svg>
                                <span>プリンター</span>
                            </button>
                            <button class="topic-btn" onclick="selectTopic('software')">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/>
                                    <line x1="8" y1="21" x2="16" y2="21"/>
                                    <line x1="12" y1="17" x2="12" y2="21"/>
                                </svg>
                                <span>ソフトウェア</span>
                            </button>
                            <button class="topic-btn" onclick="selectTopic('email')">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                                    <polyline points="22,6 12,13 2,6"/>
                                </svg>
                                <span>メール設定</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- AI処理インジケーター -->
                <div class="ai-processing" id="aiProcessing" style="display: none;">
                    <div class="processing-content">
                        <div class="processing-stages">
                            <div class="stage" id="stageAnalyze">
                                <div class="stage-icon">🔍</div>
                                <div class="stage-label">問題分析</div>
                                <div class="stage-progress"></div>
                            </div>
                            <div class="stage" id="stageSearch">
                                <div class="stage-icon">📚</div>
                                <div class="stage-label">KB検索</div>
                                <div class="stage-progress"></div>
                            </div>
                            <div class="stage" id="stageGenerate">
                                <div class="stage-icon">🤖</div>
                                <div class="stage-label">回答生成</div>
                                <div class="stage-progress"></div>
                            </div>
                        </div>
                        <div class="processing-text" id="processingText">問題を分析しています...</div>
                    </div>
                </div>

                <!-- 入力エリア -->
                <div class="input-area">
                    <div class="input-toolbar">
                        <button class="toolbar-btn" title="ファイル添付">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"/>
                            </svg>
                        </button>
                        <button class="toolbar-btn" title="スクリーンショット">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                <circle cx="8.5" cy="8.5" r="1.5"/>
                                <polyline points="21 15 16 10 5 21"/>
                            </svg>
                        </button>
                    </div>
                    <div class="input-container">
                        <textarea
                            id="messageInput"
                            placeholder="IT関連の質問を入力してください..."
                            rows="1"
                            onkeydown="handleKeyDown(event)"
                        ></textarea>
                        <button class="send-btn" id="sendBtn" onclick="sendMessage()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="22" y1="2" x2="11" y2="13"/>
                                <polygon points="22 2 15 22 11 13 2 9 22 2"/>
                            </svg>
                        </button>
                    </div>
                    <div class="input-footer">
                        <span class="ai-badge">
                            <span class="ai-dot"></span>
                            AI Powered by Claude + Gemini + Perplexity
                        </span>
                        <span class="shortcut-hint">Enter で送信 • Shift+Enter で改行</span>
                    </div>
                </div>
            </div>
            </div>

            <!-- セクション: マイチケット -->
            <div class="section-content" id="section-tickets" style="display: none;">
                <div class="content-area">
                    <div class="content-header">
                        <h2>マイチケット</h2>
                        <p>あなたのサポートチケット一覧</p>
                    </div>
                    <div class="tickets-container">
                        <div class="tickets-filter">
                            <button class="filter-btn active" data-filter="all">すべて</button>
                            <button class="filter-btn" data-filter="open">未対応</button>
                            <button class="filter-btn" data-filter="in-progress">対応中</button>
                            <button class="filter-btn" data-filter="resolved">解決済み</button>
                        </div>
                        <div class="tickets-list">
                            <div class="ticket-card" data-status="open">
                                <div class="ticket-header">
                                    <span class="ticket-id">#TKT-2024-0123</span>
                                    <span class="ticket-status-badge open">未対応</span>
                                </div>
                                <h3 class="ticket-title">プリンターに接続できない</h3>
                                <p class="ticket-desc">3階のプリンター(PR-3F-01)に印刷ジョブを送信できません。ドライバーは最新版です。</p>
                                <div class="ticket-meta">
                                    <span class="ticket-category"><span class="category-dot hardware"></span>ハードウェア</span>
                                    <span class="ticket-date">📅 2024/01/22 作成</span>
                                </div>
                            </div>
                            <div class="ticket-card" data-status="in-progress">
                                <div class="ticket-header">
                                    <span class="ticket-id">#TKT-2024-0118</span>
                                    <span class="ticket-status-badge in-progress">対応中</span>
                                </div>
                                <h3 class="ticket-title">メール送信が遅延する</h3>
                                <p class="ticket-desc">Outlookからメール送信時、5〜10分程度の遅延が発生しています。</p>
                                <div class="ticket-meta">
                                    <span class="ticket-category"><span class="category-dot software"></span>ソフトウェア</span>
                                    <span class="ticket-date">📅 2024/01/20 作成</span>
                                </div>
                                <div class="ticket-progress">
                                    <div class="progress-bar"><div class="progress-fill" style="width: 60%;"></div></div>
                                    <span class="progress-text">担当: 山田さん - 調査中</span>
                                </div>
                            </div>
                            <div class="ticket-card" data-status="resolved">
                                <div class="ticket-header">
                                    <span class="ticket-id">#TKT-2024-0102</span>
                                    <span class="ticket-status-badge resolved">解決済み</span>
                                </div>
                                <h3 class="ticket-title">VPN接続エラー</h3>
                                <p class="ticket-desc">在宅勤務時にVPNに接続できませんでした。認証エラーが表示されていました。</p>
                                <div class="ticket-meta">
                                    <span class="ticket-category"><span class="category-dot network"></span>ネットワーク</span>
                                    <span class="ticket-date">✅ 2024/01/20 解決</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- セクション: FAQ -->
            <div class="section-content" id="section-faq" style="display: none;">
                <div class="content-area">
                    <div class="content-header">
                        <h2>よくある質問 (FAQ)</h2>
                        <p>IT関連のよくある質問と回答</p>
                    </div>
                    <div class="faq-search">
                        <input type="text" id="faqSearch" placeholder="🔍 FAQを検索..." onkeyup="filterFAQ()">
                    </div>
                    <div class="faq-categories">
                        <button class="faq-cat-btn active" data-cat="all">すべて</button>
                        <button class="faq-cat-btn" data-cat="network">ネットワーク</button>
                        <button class="faq-cat-btn" data-cat="software">ソフトウェア</button>
                        <button class="faq-cat-btn" data-cat="security">セキュリティ</button>
                        <button class="faq-cat-btn" data-cat="account">アカウント</button>
                    </div>
                    <div class="faq-list" id="faqList">
                        <div class="faq-item" data-cat="network">
                            <div class="faq-question" onclick="toggleFAQ(this)">
                                <span>WiFiに接続できない場合はどうすればいいですか？</span>
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="6 9 12 15 18 9"/>
                                </svg>
                            </div>
                            <div class="faq-answer">
                                <p>以下の手順をお試しください：</p>
                                <ol>
                                    <li>WiFiがオンになっているか確認</li>
                                    <li>機内モードがオフになっているか確認</li>
                                    <li>WiFiを一度オフにして再度オンにする</li>
                                    <li>PCを再起動する</li>
                                    <li>上記で解決しない場合はIT部門(内線3456)へ連絡</li>
                                </ol>
                            </div>
                        </div>
                        <div class="faq-item" data-cat="security">
                            <div class="faq-question" onclick="toggleFAQ(this)">
                                <span>パスワードを忘れた場合はどうすればいいですか？</span>
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="6 9 12 15 18 9"/>
                                </svg>
                            </div>
                            <div class="faq-answer">
                                <p>パスワードリセットポータルをご利用ください：</p>
                                <ol>
                                    <li>https://passwordreset.company.co.jp にアクセス</li>
                                    <li>社員番号を入力</li>
                                    <li>登録済みのメールまたは電話で本人確認</li>
                                    <li>新しいパスワードを設定</li>
                                </ol>
                                <p class="faq-note">※ パスワードは8文字以上、大小英字・数字・記号を含める必要があります</p>
                            </div>
                        </div>
                        <div class="faq-item" data-cat="network">
                            <div class="faq-question" onclick="toggleFAQ(this)">
                                <span>VPNの接続方法を教えてください</span>
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="6 9 12 15 18 9"/>
                                </svg>
                            </div>
                            <div class="faq-answer">
                                <p>FortiClient VPNを使用して接続します：</p>
                                <ol>
                                    <li>FortiClient VPNアプリを起動</li>
                                    <li>接続先: vpn.company.co.jp を選択</li>
                                    <li>ユーザーID: 社員番号を入力</li>
                                    <li>パスワード: ADパスワードを入力</li>
                                    <li>Microsoft Authenticatorで二要素認証</li>
                                </ol>
                            </div>
                        </div>
                        <div class="faq-item" data-cat="software">
                            <div class="faq-question" onclick="toggleFAQ(this)">
                                <span>新しいソフトウェアをインストールしたい</span>
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="6 9 12 15 18 9"/>
                                </svg>
                            </div>
                            <div class="faq-answer">
                                <p>社内ソフトウェアポータルからインストールできます：</p>
                                <ol>
                                    <li>https://software.company.co.jp にアクセス</li>
                                    <li>必要なソフトウェアを検索</li>
                                    <li>「インストール」ボタンをクリック</li>
                                </ol>
                                <p class="faq-note">※ 管理者権限が必要なソフトウェアは申請フォームから申請してください</p>
                            </div>
                        </div>
                        <div class="faq-item" data-cat="account">
                            <div class="faq-question" onclick="toggleFAQ(this)">
                                <span>アカウントがロックされました</span>
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="6 9 12 15 18 9"/>
                                </svg>
                            </div>
                            <div class="faq-answer">
                                <p>パスワードを5回連続で間違えるとアカウントがロックされます。</p>
                                <ul>
                                    <li>30分後に自動的にロックが解除されます</li>
                                    <li>急ぎの場合はIT部門(内線3456)に連絡してください</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- 右サイドパネル -->
        <aside class="info-panel" id="infoPanel">
            <div class="panel-header">
                <h3>関連情報</h3>
                <button class="panel-close" onclick="toggleInfoPanel()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div class="panel-content">
                <div class="info-section">
                    <h4>📋 最近のチケット</h4>
                    <div class="ticket-list">
                        <div class="ticket-item">
                            <span class="ticket-status resolved"></span>
                            <div class="ticket-info">
                                <span class="ticket-title">VPN接続エラー</span>
                                <span class="ticket-date">2日前に解決</span>
                            </div>
                        </div>
                        <div class="ticket-item">
                            <span class="ticket-status in-progress"></span>
                            <div class="ticket-info">
                                <span class="ticket-title">メール送信遅延</span>
                                <span class="ticket-date">対応中</span>
                            </div>
                        </div>
                        <div class="ticket-item">
                            <span class="ticket-status open"></span>
                            <div class="ticket-info">
                                <span class="ticket-title">プリンター設定</span>
                                <span class="ticket-date">本日作成</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="info-section">
                    <h4>📰 お知らせ</h4>
                    <div class="notice-list">
                        <div class="notice-item important">
                            <span class="notice-badge">重要</span>
                            <p>1/25 深夜メンテナンス予定</p>
                        </div>
                        <div class="notice-item">
                            <span class="notice-badge">情報</span>
                            <p>Windows Update 適用推奨</p>
                        </div>
                    </div>
                </div>

                <div class="info-section">
                    <h4>📞 緊急連絡先</h4>
                    <div class="contact-list">
                        <div class="contact-item">
                            <span class="contact-label">IT緊急対応</span>
                            <span class="contact-value">内線: 9999</span>
                        </div>
                        <div class="contact-item">
                            <span class="contact-label">セキュリティ</span>
                            <span class="contact-value">内線: 9900</span>
                        </div>
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <script src="js/it-helpdesk.js"></script>
</body>
</html>
