<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mirai HelpDesk - „Éû„É´„ÉÅAIÁµ±Âêà„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´Áâà</title>
    <link rel="stylesheet" href="css/professional.css">
</head>
<body>
    <div class="app-container">
        <!-- „Çµ„Ç§„Éâ„Éê„Éº -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                            <path d="M2 17l10 5 10-5"/>
                            <path d="M2 12l10 5 10-5"/>
                        </svg>
                    </div>
                    <div class="logo-text">
                        <span class="logo-title">Mirai HelpDesk</span>
                        <span class="logo-subtitle">Multi-AI Support</span>
                    </div>
                </div>
            </div>

            <nav class="sidebar-nav">
                <!-- „É°„Ç§„É≥„É°„Éã„É•„Éº -->
                <div class="nav-section">
                    <span class="nav-section-title">üìã „É°„Ç§„É≥„É°„Éã„É•„Éº</span>
                    <a href="#" class="nav-item active" data-page="dashboard">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/>
                            <rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/>
                        </svg>
                        <span>„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ</span>
                    </a>
                    <a href="#" class="nav-item" data-page="my-tickets">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14 2 14 8 20 8"/>
                        </svg>
                        <span>„Éû„Ç§„ÉÅ„Ç±„ÉÉ„Éà</span>
                        <span class="nav-count">5</span>
                    </a>
                    <a href="#" class="nav-item" data-page="create-ticket">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="16"/>
                            <line x1="8" y1="12" x2="16" y2="12"/>
                        </svg>
                        <span>Êñ∞Ë¶è„ÉÅ„Ç±„ÉÉ„Éà‰ΩúÊàê</span>
                    </a>
                    <a href="#" class="nav-item" data-page="helpdesk-list">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/>
                            <line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/>
                            <line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/>
                        </svg>
                        <span>„Éò„É´„Éó„Éá„Çπ„ÇØ‰∏ÄË¶ß</span>
                        <span class="nav-count">50</span>
                    </a>
                </div>

                <!-- „Çµ„Éù„Éº„Éà -->
                <div class="nav-section">
                    <span class="nav-section-title">ü§ñ AI„Çµ„Éù„Éº„Éà</span>
                    <a href="#" class="nav-item" data-page="knowledge">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                        </svg>
                        <span>„Éä„É¨„ÉÉ„Ç∏„Éô„Éº„Çπ</span>
                        <span class="nav-count">30</span>
                    </a>
                    <a href="#" class="nav-item" data-page="ai-assistant">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                        </svg>
                        <span>AI„Ç¢„Ç∑„Çπ„Çø„É≥„Éà</span>
                        <span class="nav-badge">NEW</span>
                    </a>
                    <a href="#" class="nav-item" data-page="ai-knowledge">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <circle cx="12" cy="12" r="6"/>
                            <circle cx="12" cy="12" r="2"/>
                        </svg>
                        <span>AIËá™ÂãïÁîüÊàê</span>
                        <span class="nav-badge">AI</span>
                    </a>
                </div>

                <!-- „Ç´„ÉÜ„Ç¥„É™ -->
                <div class="nav-section">
                    <span class="nav-section-title">üìÅ „Ç´„ÉÜ„Ç¥„É™</span>
                    <a href="#" class="nav-item category" data-category="network">
                        <span class="category-dot network"></span>
                        <span>„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ</span>
                    </a>
                    <a href="#" class="nav-item category" data-category="software">
                        <span class="category-dot software"></span>
                        <span>„ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢</span>
                    </a>
                    <a href="#" class="nav-item category" data-category="hardware">
                        <span class="category-dot hardware"></span>
                        <span>„Éè„Éº„Éâ„Ç¶„Çß„Ç¢</span>
                    </a>
                    <a href="#" class="nav-item category" data-category="security">
                        <span class="category-dot security"></span>
                        <span>„Çª„Ç≠„É•„É™„ÉÜ„Ç£</span>
                    </a>
                    <a href="#" class="nav-item category" data-category="account">
                        <span class="category-dot account"></span>
                        <span>„Ç¢„Ç´„Ç¶„É≥„Éà</span>
                    </a>
                </div>

                <!-- „Ç∑„Çπ„ÉÜ„É†ÁÆ°ÁêÜ -->
                <div class="nav-section">
                    <span class="nav-section-title">‚öôÔ∏è „Ç∑„Çπ„ÉÜ„É†ÁÆ°ÁêÜ</span>
                    <a href="#" class="nav-item" data-page="approvals">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="20 6 9 17 4 12"/>
                        </svg>
                        <span>ÊâøË™çÁÆ°ÁêÜ</span>
                        <span class="nav-count">3</span>
                    </a>
                    <a href="#" class="nav-item" data-page="m365">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                            <line x1="9" y1="9" x2="15" y2="15"/><line x1="15" y1="9" x2="9" y2="15"/>
                        </svg>
                        <span>M365ÁÆ°ÁêÜ</span>
                    </a>
                    <a href="#" class="nav-item" data-page="settings">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M12 1v6m0 6v6M3.93 6.93l4.24 4.24m8.49 8.49l4.24 4.24M1 12h6m6 0h6m-12.07 6.07l4.24-4.24m8.49-8.49l4.24-4.24"/>
                        </svg>
                        <span>„Ç∑„Çπ„ÉÜ„É†Ë®≠ÂÆö</span>
                    </a>
                </div>
            </nav>

            <div class="sidebar-footer">
                <div class="system-status">
                    <div class="status-indicator online"></div>
                    <span>ÂÖ®„Ç∑„Çπ„ÉÜ„É†Á®ºÂÉç‰∏≠</span>
                </div>
                <div class="user-card">
                    <div class="user-avatar">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                        </svg>
                    </div>
                    <div class="user-info">
                        <span class="user-name">‰ΩêËó§Ëä±Â≠ê</span>
                        <span class="user-dept">Agent</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
        <main class="main-content">
            <div class="content-area" id="main-content"></div>
        </main>
    </div>

    <script src="js/sample-data.js"></script>
    <script src="js/ai-orchestration.js"></script>
    <script>
        console.log('%cüöÄ Mirai HelpDesk - „Éû„É´„ÉÅAIÁµ±Âêà„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´Áâà', 'color: #2563eb; font-size: 18px; font-weight: bold;');
        console.log('%c‚úÖ WebUI-Sample2„ÅÆ„Éá„Ç∂„Ç§„É≥ + Sample3„ÅÆ„Éû„É´„ÉÅAIÊ©üËÉΩ„ÇíÁµ±Âêà', 'color: #10b981; font-size: 14px;');
        console.log('üìä „ÉÅ„Ç±„ÉÉ„Éà:', SAMPLE_TICKETS.length, '‰ª∂');
        console.log('üìö „Éä„É¨„ÉÉ„Ç∏:', SAMPLE_KNOWLEDGE.length, '‰ª∂');

        // „Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥
        document.querySelectorAll('[data-page]').forEach(item => {
            item.addEventListener('click', (e) => {
                e.preventDefault();
                const page = item.dataset.page;

                document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
                item.classList.add('active');

                console.log('üìÑ Navigate to:', page);
                loadPage(page);
            });
        });

        // „Ç´„ÉÜ„Ç¥„É™ÈÅ∏Êäû
        document.querySelectorAll('[data-category]').forEach(item => {
            item.addEventListener('click', (e) => {
                e.preventDefault();
                const category = item.dataset.category;
                console.log('üìÅ Category selected:', category);
                // „Ç´„ÉÜ„Ç¥„É™„Éï„Ç£„É´„ÇøÊ©üËÉΩ„ÅØÂÆüË£Ö‰∏≠
            });
        });

        // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„Åø
        function loadPage(page) {
            const content = document.getElementById('main-content');
            content.innerHTML = '<div style="text-align:center;padding:80px"><div class="spinner"></div><p style="margin-top:20px;color:var(--text-muted)">Ë™≠„ÅøËæº„Åø‰∏≠...</p></div>';

            setTimeout(() => {
                try {
                    if (page === 'dashboard') content.innerHTML = renderDashboard();
                    else if (page === 'my-tickets') content.innerHTML = renderMyTickets();
                    else if (page === 'create-ticket') content.innerHTML = renderCreateTicket();
                    else if (page === 'helpdesk-list') content.innerHTML = renderHelpdeskList();
                    else if (page === 'ai-assistant') content.innerHTML = renderAIAssistant();
                    else if (page === 'ai-knowledge') content.innerHTML = renderAIKnowledge();
                    else if (page === 'knowledge') content.innerHTML = renderKnowledge();
                    else if (page === 'approvals') content.innerHTML = renderApprovals();
                    else if (page === 'm365') content.innerHTML = renderM365();
                    else if (page === 'settings') content.innerHTML = renderSettings();
                    else content.innerHTML = '<div class="card"><h2>„Éö„Éº„Ç∏„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì</h2></div>';

                    console.log('‚úÖ Page rendered:', page);
                } catch (error) {
                    console.error('‚ùå Render error:', error);
                    content.innerHTML = `<div class="card error-card"><h3>„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü</h3><p>${error.message}</p></div>`;
                }
            }, 300);
        }

        // „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ
        function renderDashboard() {
            const total = SAMPLE_TICKETS.length;
            const stats = {
                new: SAMPLE_TICKETS.filter(t => t.status === 'New').length,
                progress: SAMPLE_TICKETS.filter(t => t.status === 'In Progress').length,
                resolved: SAMPLE_TICKETS.filter(t => t.status === 'Resolved').length,
                ai: SAMPLE_TICKETS.filter(t => t.ai_processed).length,
            };

            return `
                <div class="content-header">
                    <div>
                        <h1 class="page-heading">„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ</h1>
                        <p class="page-description">„Ç∑„Çπ„ÉÜ„É†ÂÖ®‰Ωì„ÅÆÊ¶ÇË¶Å„Å®Áµ±Ë®àÊÉÖÂ†±</p>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="metric-card">
                        <div class="metric-label">Total Tickets</div>
                        <div class="metric-value" style="color:#2563eb">${total}</div>
                        <div class="metric-change positive">‚Üë 12% from last week</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">New Tickets</div>
                        <div class="metric-value" style="color:#f59e0b">${stats.new}</div>
                        <div class="metric-change">Needs attention</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">In Progress</div>
                        <div class="metric-value" style="color:#8b5cf6">${stats.progress}</div>
                        <div class="metric-change">Active</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Resolved</div>
                        <div class="metric-value" style="color:#10b981">${stats.resolved}</div>
                        <div class="metric-change positive">‚Üë Good progress</div>
                    </div>
                </div>

                <div class="card-grid">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">ü§ñ AI Processing Statistics</h2>
                        </div>
                        <div class="stats-row">
                            <div class="stat-item">
                                <div class="stat-value-large" style="color:#2563eb">${stats.ai}</div>
                                <div class="stat-label-small">AI Processed Tickets</div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width:${Math.round(stats.ai/total*100)}%;background:#2563eb"></div>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value-large" style="color:#8b5cf6">18</div>
                                <div class="stat-label-small">AI Generated Knowledge</div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width:60%;background:#8b5cf6"></div>
                                </div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value-large" style="color:#10b981">89%</div>
                                <div class="stat-label-small">Automation Success</div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width:89%;background:#10b981"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">Recent Tickets</h2>
                            <button class="btn btn-primary btn-sm" onclick="navigate('helpdesk-list')">View All ‚Üí</button>
                        </div>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Title</th>
                                        <th>Priority</th>
                                        <th>Status</th>
                                        <th>ITSM</th>
                                        <th>AI</th>
                                        <th>Created</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${SAMPLE_TICKETS.slice(0, 8).map(t => `
                                        <tr class="clickable-row" onclick="viewTicketDetail('${t.ticket_id}')">
                                            <td class="ticket-id">#${t.ticket_number}</td>
                                            <td class="ticket-title">${t.subject}</td>
                                            <td><span class="priority-badge priority-${t.priority.toLowerCase()}">${t.priority}</span></td>
                                            <td><span class="status-badge">${t.status}</span></td>
                                            <td><span class="itsm-badge">${ITSM_TYPES[t.itsm_type].icon}</span></td>
                                            <td>${t.ai_processed ? 'ü§ñ' : '‚Äî'}</td>
                                            <td class="timestamp">${new Date(t.created_at).toLocaleDateString('ja-JP', {month:'short',day:'numeric'})}</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            `;
        }

        // „Éû„Ç§„ÉÅ„Ç±„ÉÉ„Éà
        function renderMyTickets() {
            const myTickets = SAMPLE_TICKETS.filter(t => t.requester_id === 'u1').slice(0, 20);

            return `
                <div class="content-header">
                    <div>
                        <h1 class="page-heading">„Éû„Ç§„ÉÅ„Ç±„ÉÉ„Éà</h1>
                        <p class="page-description">Ëá™ÂàÜ„Åå‰ΩúÊàê„Åó„Åü„ÉÅ„Ç±„ÉÉ„Éà‰∏ÄË¶ß</p>
                    </div>
                    <button class="btn btn-primary" onclick="navigate('create-ticket')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:18px;height:18px">
                            <circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="16"/><line x1="8" y1="12" x2="16" y2="12"/>
                        </svg>
                        Êñ∞Ë¶è‰ΩúÊàê
                    </button>
                </div>

                <div class="card">
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Title</th>
                                    <th>Priority</th>
                                    <th>Status</th>
                                    <th>Assignee</th>
                                    <th>Created</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${myTickets.map(t => `
                                    <tr>
                                        <td class="ticket-id">#${t.ticket_number}</td>
                                        <td class="ticket-title">${t.subject}</td>
                                        <td><span class="priority-badge priority-${t.priority.toLowerCase()}">${t.priority}</span></td>
                                        <td><span class="status-badge">${t.status}</span></td>
                                        <td>${t.assignee_id ? SAMPLE_USERS.find(u => u.user_id === t.assignee_id)?.display_name || '‚Äî' : 'Êú™Ââ≤ÂΩì'}</td>
                                        <td class="timestamp">${new Date(t.created_at).toLocaleDateString('ja-JP')}</td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="btn btn-sm btn-primary" onclick="viewTicketDetail('${t.ticket_id}')">
                                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:14px;height:14px">
                                                        <circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/>
                                                    </svg>
                                                    Ë©≥Á¥∞
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
        }

        // Êñ∞Ë¶è„ÉÅ„Ç±„ÉÉ„Éà‰ΩúÊàê
        function renderCreateTicket() {
            return `
                <div class="content-header">
                    <h1 class="page-heading">Êñ∞Ë¶è„ÉÅ„Ç±„ÉÉ„Éà‰ΩúÊàê</h1>
                    <p class="page-description">ÂïèÈ°å„ÇÑ‰æùÈ†º„ÇíÁôªÈå≤„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>
                </div>

                <div class="card" style="max-width:900px;margin:0 auto">
                    <form onsubmit="createTicket(event)" class="ticket-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Á®ÆÂà• *</label>
                                <select class="form-input" required>
                                    <option value="incident">üö® ÈöúÂÆ≥ÔºàIncidentÔºâ</option>
                                    <option value="service_request">üìã „Çµ„Éº„Éì„ÇπË¶ÅÊ±ÇÔºàService RequestÔºâ</option>
                                    <option value="change">üîÑ Â§âÊõ¥ÔºàChangeÔºâ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">„Ç´„ÉÜ„Ç¥„É™„Éº</label>
                                <select class="form-input">
                                    <option value="">ÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>
                                    <option value="hardware">„Éè„Éº„Éâ„Ç¶„Çß„Ç¢</option>
                                    <option value="software">„ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢</option>
                                    <option value="network">„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ</option>
                                    <option value="m365">Microsoft 365</option>
                                    <option value="security">„Çª„Ç≠„É•„É™„ÉÜ„Ç£</option>
                                    <option value="account">„Ç¢„Ç´„Ç¶„É≥„ÉàÁÆ°ÁêÜ</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">„Çø„Ç§„Éà„É´ *</label>
                            <input type="text" class="form-input" placeholder="‰æã: PC„ÅåËµ∑Âãï„Åó„Åæ„Åõ„Çì" required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Ê¶ÇË¶ÅË™¨Êòé *</label>
                            <textarea class="form-input" rows="5" placeholder="ÂïèÈ°å„ÅÆË©≥Á¥∞„ÇÑÁô∫ÁîüÁä∂Ê≥Å„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ" required></textarea>
                        </div>

                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">ÂΩ±ÈüøÂ∫¶ *</label>
                                <select class="form-input" required>
                                    <option value="individual">ÂÄã‰∫∫</option>
                                    <option value="department">ÈÉ®ÁΩ≤</option>
                                    <option value="company">ÂÖ®Á§æ</option>
                                    <option value="external">ÂØæÂ§ñÂΩ±Èüø</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Á∑äÊÄ•Â∫¶ *</label>
                                <select class="form-input" required>
                                    <option value="low">‰Ωé</option>
                                    <option value="medium" selected>‰∏≠</option>
                                    <option value="high">È´ò</option>
                                    <option value="critical">Âç≥ÊôÇ</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:18px;height:18px">
                                    <polyline points="20 6 9 17 4 12"/>
                                </svg>
                                ‰ΩúÊàê
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="navigate('my-tickets')">„Ç≠„É£„É≥„Çª„É´</button>
                        </div>
                    </form>
                </div>
            `;
        }

        // „Éò„É´„Éó„Éá„Çπ„ÇØ‰∏ÄË¶ßÔºàÂÆåÂÖ®ÁâàÔºâ
        function renderHelpdeskList() {
            return `
                <div class="content-header">
                    <div>
                        <h1 class="page-heading">„Éò„É´„Éó„Éá„Çπ„ÇØ‰∏ÄË¶ß</h1>
                        <p class="page-description">ÂÖ®${SAMPLE_TICKETS.length}‰ª∂„ÅÆ„ÉÅ„Ç±„ÉÉ„Éà„ÇíÁÆ°ÁêÜ</p>
                    </div>
                    <button class="btn btn-primary" onclick="navigate('create-ticket')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:18px;height:18px">
                            <circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="16"/><line x1="8" y1="12" x2="16" y2="12"/>
                        </svg>
                        Êñ∞Ë¶è‰ΩúÊàê
                    </button>
                </div>

                <div class="card">
                    <div class="card-toolbar">
                        <div class="filter-group">
                            <select class="filter-select">
                                <option value="">ÂÖ®„Çπ„ÉÜ„Éº„Çø„Çπ</option>
                                <option value="New">Êñ∞Ë¶è</option>
                                <option value="In Progress">ÂØæÂøú‰∏≠</option>
                                <option value="Resolved">Ëß£Ê±∫Ê∏à„Åø</option>
                            </select>
                            <select class="filter-select">
                                <option value="">ÂÖ®„Ç´„ÉÜ„Ç¥„É™„Éº</option>
                                <option value="hardware">„Éè„Éº„Éâ„Ç¶„Çß„Ç¢</option>
                                <option value="software">„ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢</option>
                                <option value="network">„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ</option>
                                <option value="m365">Microsoft 365</option>
                            </select>
                        </div>
                    </div>

                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th style="width:70px">ID</th>
                                    <th style="width:130px">„Ç´„ÉÜ„Ç¥„É™„Éº</th>
                                    <th style="width:220px">„Çø„Ç§„Éà„É´</th>
                                    <th style="width:280px">Ê¶ÇË¶ÅË™¨Êòé</th>
                                    <th style="width:140px">Ëß£Ê±∫ÊñπÊ≥ï</th>
                                    <th style="width:120px">Áä∂Ê≥Å</th>
                                    <th style="width:280px">Êìç‰Ωú</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${SAMPLE_TICKETS.map((t, i) => `
                                    <tr class="data-row">
                                        <td class="ticket-id">#${t.ticket_number}</td>
                                        <td>
                                            <span class="category-badge cat-${['network','software','hardware','account'][i % 4]}">
                                                ${['„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ','„ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢','„Éè„Éº„Éâ„Ç¶„Çß„Ç¢','„Ç¢„Ç´„Ç¶„É≥„Éà'][i % 4]}
                                            </span>
                                        </td>
                                        <td class="ticket-title">${t.subject}</td>
                                        <td class="ticket-description">${t.description}</td>
                                        <td class="resolution-status">${t.resolved_at ? '‚úÖ Ëß£Ê±∫Ê∏à„Åø' : 'üîç Ë™øÊüª‰∏≠'}</td>
                                        <td><span class="status-badge status-${t.status.replace(/ /g, '-').toLowerCase()}">${t.status}</span></td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="btn btn-xs btn-primary" onclick="viewTicketDetail('${t.ticket_id}')">
                                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:14px;height:14px">
                                                        <circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/>
                                                    </svg>
                                                    Ë©≥Á¥∞
                                                </button>
                                                <button class="btn btn-xs btn-secondary" onclick="editTicket('${t.ticket_id}')">
                                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:14px;height:14px">
                                                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                                                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                                                    </svg>
                                                    Á∑®ÈõÜ
                                                </button>
                                                <button class="btn btn-xs btn-danger" onclick="deleteTicket('${t.ticket_id}')">
                                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:14px;height:14px">
                                                        <polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                                                    </svg>
                                                    ÂâäÈô§
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
        }

        // AI„Ç¢„Ç∑„Çπ„Çø„É≥„Éà
        function renderAIAssistant() {
            return `
                <div class="content-header">
                    <h1 class="page-heading">ü§ñ „Éû„É´„ÉÅAI„Ç™„Éº„Ç±„Çπ„Éà„É¨„Éº„Ç∑„Éß„É≥</h1>
                    <p class="page-description">Claude„ÄÅGemini„ÄÅPerplexity„ÇíÁµÑ„ÅøÂêà„Çè„Åõ„Å¶ÊúÄÈÅ©„Å™ÂõûÁ≠î„ÇíÁîüÊàê</p>
                </div>

                <div class="card ai-card">
                    <div class="ai-selector-grid">
                        ${Object.entries({
                            CLAUDE: { icon: 'üß†', name: 'Claude', desc: '‰∏ÄÊ¨°Âà§Êñ≠„ÉªÊúÄÁµÇÁµ±Âêà' },
                            GEMINI: { icon: 'üîç', name: 'Gemini', desc: 'ÊÉÖÂ†±ÂèéÈõÜ' },
                            PERPLEXITY: { icon: 'üåê', name: 'Perplexity', desc: 'Ê†πÊã†ÁîüÊàê' }
                        }).map(([key, ai]) => `
                            <div class="ai-option-card ${key === 'CLAUDE' ? 'selected' : ''}" onclick="toggleAI(this)">
                                <div class="ai-icon">${ai.icon}</div>
                                <div class="ai-name">${ai.name}</div>
                                <div class="ai-desc">${ai.desc}</div>
                            </div>
                        `).join('')}
                    </div>

                    <div class="query-section">
                        <label class="form-label">Âïè„ÅÑÂêà„Çè„ÅõÂÜÖÂÆπ</label>
                        <textarea id="ai-query" class="query-textarea">PC„ÅåËµ∑Âãï„Åó„Åæ„Åõ„Çì„ÄÇ„Å©„ÅÜ„Åô„Çå„Å∞„ÅÑ„ÅÑ„Åß„Åô„ÅãÔºü</textarea>
                        <button class="btn btn-primary btn-large" onclick="processAI()" style="width:100%;margin-top:20px">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:20px;height:20px">
                                <polygon points="5 3 19 12 5 21 5 3"/>
                            </svg>
                            „Éû„É´„ÉÅAIÂá¶ÁêÜ„ÇíÂÆüË°å
                        </button>
                    </div>

                    <div class="subagent-section">
                        <h3 class="section-title">7„Å§„ÅÆSubAgent‰∏¶ÂàóÂá¶ÁêÜ</h3>
                        <div class="subagent-grid-modern">
                            ${Object.entries(SUB_AGENTS).map(([k, a]) => `
                                <div class="subagent-card" id="sub-${k}">
                                    <div class="subagent-icon-large">${a.icon}</div>
                                    <div class="subagent-name">${a.name}</div>
                                    <div class="subagent-role">${a.role}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>

                <div id="ai-result" class="hidden"></div>
            `;
        }

        // AIËá™ÂãïÁîüÊàê„Éä„É¨„ÉÉ„Ç∏
        function renderAIKnowledge() {
            const aiArticles = SAMPLE_KNOWLEDGE.filter(k => k.is_ai_generated);

            return `
                <div class="content-header">
                    <div>
                        <h1 class="page-heading">‚ú® AIËá™ÂãïÁîüÊàê„Éä„É¨„ÉÉ„Ç∏</h1>
                        <p class="page-description">7„Å§„ÅÆSubAgent„ÅåÈ´òÂìÅË≥™„Å™„Éä„É¨„ÉÉ„Ç∏„ÇíËá™ÂãïÁîüÊàê</p>
                    </div>
                    <button class="btn btn-primary">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:18px;height:18px">
                            <circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="16"/><line x1="8" y1="12" x2="16" y2="12"/>
                        </svg>
                        AI„ÅßÊñ∞Ë¶è‰ΩúÊàê
                    </button>
                </div>

                <div class="knowledge-grid">
                    ${aiArticles.slice(0, 12).map(k => `
                        <div class="knowledge-card ai-generated" onclick="viewKnowledge('${k.article_id}')">
                            <div class="knowledge-icon">ü§ñ</div>
                            <h3 class="knowledge-title">${k.title}</h3>
                            <div class="knowledge-meta">
                                <span class="meta-badge badge-ai">AIÁîüÊàê</span>
                                <span class="meta-badge">ÂìÅË≥™ ${k.quality_score}%</span>
                                <span class="meta-badge">üëÅÔ∏è ${k.view_count}</span>
                            </div>
                            <div class="knowledge-agents">
                                SubAgents: ${k.subagents.slice(0, 3).join(', ')}...
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // „Éä„É¨„ÉÉ„Ç∏„Éô„Éº„Çπ
        function renderKnowledge() {
            return `
                <div class="content-header">
                    <h1 class="page-heading">üìö „Éä„É¨„ÉÉ„Ç∏„Éô„Éº„Çπ</h1>
                    <p class="page-description">${SAMPLE_KNOWLEDGE.length}‰ª∂„ÅÆË®ò‰∫ã</p>
                </div>

                <div class="two-column-layout">
                    <aside class="knowledge-sidebar">
                        <h3 class="sidebar-heading">„Ç´„ÉÜ„Ç¥„É™</h3>
                        ${['„Åô„Åπ„Å¶', 'Microsoft 365', '„Éè„Éº„Éâ„Ç¶„Çß„Ç¢', '„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ', '„Çª„Ç≠„É•„É™„ÉÜ„Ç£'].map(cat => `
                            <div class="category-filter-item">
                                üìÅ ${cat}
                            </div>
                        `).join('')}
                    </aside>

                    <div class="knowledge-main">
                        <div class="knowledge-grid">
                            ${SAMPLE_KNOWLEDGE.slice(0, 12).map(k => `
                                <div class="knowledge-card" onclick="viewKnowledge('${k.article_id}')">
                                    <div class="knowledge-icon">${k.is_ai_generated ? 'ü§ñ' : 'üìÑ'}</div>
                                    <h3 class="knowledge-title">${k.title}</h3>
                                    <div class="knowledge-meta">
                                        <span class="meta-badge">${k.category}</span>
                                        <span class="meta-badge">üëÅÔ∏è ${k.view_count}</span>
                                        ${k.is_ai_generated ? '<span class="meta-badge badge-ai">AI</span>' : ''}
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
        }

        // ÊâøË™çÁÆ°ÁêÜ
        function renderApprovals() {
            const pending = SAMPLE_APPROVALS.filter(a => a.state === 'requested');

            return `
                <div class="content-header">
                    <h1 class="page-heading">‚úÖ ÊâøË™çÁÆ°ÁêÜ</h1>
                    <p class="page-description">${pending.length}‰ª∂„ÅÆÊâøË™çÂæÖ„Å°</p>
                </div>

                <div class="card">
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Ticket</th>
                                    <th>Request</th>
                                    <th>Requester</th>
                                    <th>SOD Validation</th>
                                    <th>Requested</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${pending.map(a => `
                                    <tr>
                                        <td class="ticket-id">#${a.ticket_number}</td>
                                        <td>${a.description}</td>
                                        <td>${a.requester}<br><small class="text-muted">${a.requester_role}</small></td>
                                        <td><span class="sod-badge sod-ok">‚úÖ OK</span></td>
                                        <td class="timestamp">${new Date(a.created_at).toLocaleDateString('ja-JP')}</td>
                                        <td>
                                            <div class="action-buttons">
                                                <button class="btn btn-xs btn-success" onclick="approve('${a.approval_id}')">
                                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:14px;height:14px">
                                                        <polyline points="20 6 9 17 4 12"/>
                                                    </svg>
                                                    ÊâøË™ç
                                                </button>
                                                <button class="btn btn-xs btn-danger" onclick="reject('${a.approval_id}')">
                                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:14px;height:14px">
                                                        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
                                                    </svg>
                                                    Âç¥‰∏ã
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
        }

        // M365ÁÆ°ÁêÜ
        function renderM365() {
            return `
                <div class="content-header">
                    <h1 class="page-heading">üîß M365Êìç‰ΩúÁÆ°ÁêÜ</h1>
                    <p class="page-description">Microsoft 365Èñ¢ÈÄ£„ÅÆÊìç‰Ωú„Çø„Çπ„ÇØ</p>
                </div>

                <div class="card">
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Task ID</th>
                                    <th>Type</th>
                                    <th>Target UPN</th>
                                    <th>Approval</th>
                                    <th>SOD</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${SAMPLE_M365_TASKS.filter(t => t.state === 'pending').map(t => `
                                    <tr>
                                        <td class="ticket-id">${t.task_number}</td>
                                        <td>${t.task_type}</td>
                                        <td class="code-text">${t.target_upn}</td>
                                        <td><span class="approval-badge approved">‚úÖ Approved</span></td>
                                        <td><span class="sod-badge sod-ok">‚úÖ OK</span></td>
                                        <td>
                                            <button class="btn btn-xs btn-primary" onclick="executeM365('${t.task_id}')">
                                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:14px;height:14px">
                                                    <polygon points="5 3 19 12 5 21 5 3"/>
                                                </svg>
                                                ÂÆüÊñΩ
                                            </button>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
        }

        // „Ç∑„Çπ„ÉÜ„É†Ë®≠ÂÆö
        function renderSettings() {
            return `
                <div class="content-header">
                    <h1 class="page-heading">‚öôÔ∏è „Ç∑„Çπ„ÉÜ„É†Ë®≠ÂÆö</h1>
                    <p class="page-description">AI API„Ç≠„Éº„Å®ÂìÅË≥™‰øùË®ºË®≠ÂÆö</p>
                </div>

                <div class="settings-grid">
                    <div class="card">
                        <h3 class="card-title">ü§ñ AIË®≠ÂÆö</h3>
                        <div class="settings-section">
                            <div class="setting-item">
                                <label class="form-label">Claude API Key</label>
                                <input type="password" class="form-input" value="sk-ant-****" readonly>
                            </div>
                            <div class="setting-item">
                                <label class="form-label">Gemini API Key</label>
                                <input type="password" class="form-input" value="AIza****" readonly>
                            </div>
                            <div class="setting-item">
                                <label class="form-label">Perplexity API Key</label>
                                <input type="password" class="form-input" value="pplx-****" readonly>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="card-title">üéØ ÂìÅË≥™‰øùË®ºHooks</h3>
                        <div class="settings-section">
                            ${['Pre-Task Hook', 'Duplicate-Check Hook (85%ÈñæÂÄ§)', 'Deviation-Check Hook', 'Post-Task Hook'].map(hook => `
                                <div class="setting-item">
                                    <label class="checkbox-label">
                                        <input type="checkbox" checked class="checkbox-input">
                                        <span>${hook}</span>
                                    </label>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
        }

        // „ÉÅ„Ç±„ÉÉ„ÉàË©≥Á¥∞„É¢„Éº„ÉÄ„É´
        function viewTicketDetail(id) {
            const ticket = SAMPLE_TICKETS.find(t => t.ticket_id === id);
            if (!ticket) return;

            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
                <div class="modal-dialog">
                    <div class="modal-header">
                        <h2 class="modal-title">Ticket #${ticket.ticket_number}</h2>
                        <button class="modal-close" onclick="this.closest('.modal-overlay').remove()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
                            </svg>
                        </button>
                    </div>
                    <div class="modal-body">
                        <h3 style="font-size:20px;margin-bottom:20px;color:var(--text-primary)">${ticket.subject}</h3>
                        <div class="badge-row" style="margin-bottom:24px">
                            <span class="priority-badge priority-${ticket.priority.toLowerCase()}">${ticket.priority}</span>
                            <span class="status-badge">${ticket.status}</span>
                            <span class="itsm-badge">${ITSM_TYPES[ticket.itsm_type].label}</span>
                            ${ticket.ai_processed ? '<span class="meta-badge badge-ai">ü§ñ AIÂá¶ÁêÜÊ∏à„Åø</span>' : ''}
                        </div>
                        <div class="detail-section">
                            <h4 class="detail-heading">Ê¶ÇË¶ÅË™¨Êòé</h4>
                            <p class="detail-text">${ticket.description}</p>
                        </div>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <div class="detail-label">„Ç´„ÉÜ„Ç¥„É™„Éº</div>
                                <div class="detail-value">${['„Éè„Éº„Éâ„Ç¶„Çß„Ç¢','„ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢','M365','„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ'][ticket.ticket_number % 4]}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">‰ΩúÊàêÊó•ÊôÇ</div>
                                <div class="detail-value">${new Date(ticket.created_at).toLocaleString('ja-JP')}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">ÂΩ±ÈüøÂ∫¶</div>
                                <div class="detail-value">${ticket.impact}</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Á∑äÊÄ•Â∫¶</div>
                                <div class="detail-value">${ticket.urgency}</div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="this.closest('.modal-overlay').remove()">Èñâ„Åò„Çã</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            setTimeout(() => modal.classList.add('show'), 10);
        }

        function viewKnowledge(id) {
            const article = SAMPLE_KNOWLEDGE.find(k => k.article_id === id);
            if (!article) return;

            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
                <div class="modal-dialog modal-lg">
                    <div class="modal-header">
                        <h2 class="modal-title">${article.title}</h2>
                        <button class="modal-close" onclick="this.closest('.modal-overlay').remove()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
                            </svg>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="badge-row" style="margin-bottom:24px">
                            <span class="meta-badge">${article.category}</span>
                            <span class="meta-badge">üëÅÔ∏è ${article.view_count}Âõû</span>
                            <span class="meta-badge">üëç ${article.helpful_count}</span>
                            ${article.is_ai_generated ? `<span class="meta-badge badge-ai">ü§ñ AI - ÂìÅË≥™${article.quality_score}%</span>` : ''}
                        </div>
                        <div class="article-content">
                            ${article.content.replace(/\n/g, '<br>')}
                        </div>
                        ${article.is_ai_generated ? `
                            <div class="ai-info-box">
                                <h4>üéØ AIÁîüÊàêÊÉÖÂ†±</h4>
                                <p><strong>SubAgents:</strong> ${article.subagents.join(', ')}</p>
                                <p><strong>ÂìÅË≥™„Çπ„Ç≥„Ç¢:</strong> ${article.quality_score}%</p>
                                <p><strong>Ê§úË®º:</strong> 4„Å§„ÅÆHooks„ÅßÂìÅË≥™‰øùË®ºÊ∏à„Åø</p>
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            setTimeout(() => modal.classList.add('show'), 10);
        }

        // AIÂá¶ÁêÜ
        async function processAI() {
            const query = document.getElementById('ai-query').value.trim();
            if (!query) {
                alert('Âïè„ÅÑÂêà„Çè„ÅõÂÜÖÂÆπ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }

            console.log('ü§ñ AIÂá¶ÁêÜÈñãÂßã:', query);

            Object.keys(SUB_AGENTS).forEach(k => {
                const elem = document.getElementById('sub-' + k);
                if (elem) elem.className = 'subagent-card processing';
            });

            for (const k of Object.keys(SUB_AGENTS)) {
                await new Promise(r => setTimeout(r, 350));
                const elem = document.getElementById('sub-' + k);
                if (elem) {
                    elem.className = 'subagent-card completed';
                    console.log('‚úÖ SubAgentÂÆå‰∫Ü:', SUB_AGENTS[k].name);
                }
            }

            const sample = SAMPLE_AI_RESULTS[query] || {
                qualityScore: { overall: 88, completeness: 90, accuracy: 86, relevance: 88 },
                answer: {
                    summary: `„Äå${query}„Äç„Å´„Å§„ÅÑ„Å¶„ÅÆÁµ±ÂêàÂõûÁ≠î„ÇíÁîüÊàê„Åó„Åæ„Åó„Åü„ÄÇ`,
                    technicalSummary: 'ÊäÄË°ìËÄÖÂêë„Åë„ÅÆË©≥Á¥∞„Å™Ë™¨Êòé„Åß„Åô„ÄÇ',
                    userSummary: '‰∏ÄËà¨„É¶„Éº„Ç∂„ÉºÂêë„Åë„ÅÆ„Çè„Åã„Çä„ÇÑ„Åô„ÅÑË™¨Êòé„Åß„Åô„ÄÇ',
                    preventiveMeasures: 'ÂÜçÁô∫Èò≤Ê≠¢Á≠ñ„ÇíÊèêÊ°à„Åó„Åæ„Åô„ÄÇ',
                    improvementSuggestions: 'Ëá™ÂãïÂåñ„Çπ„ÇØ„É™„Éó„Éà„ÅÆÂ∞éÂÖ•„ÇíÊé®Â•®„Åó„Åæ„Åô„ÄÇ',
                    automationPotential: 75
                }
            };

            console.log('üéØ AIÂá¶ÁêÜÂÆå‰∫Ü - ÂìÅË≥™„Çπ„Ç≥„Ç¢:', sample.qualityScore.overall + '%');

            document.getElementById('ai-result').className = 'card ai-result-card';
            document.getElementById('ai-result').innerHTML = `
                <div class="card-header">
                    <h2 class="card-title">üéØ „Éû„É´„ÉÅAIÂá¶ÁêÜÁµêÊûú</h2>
                </div>

                <div class="quality-metrics">
                    <div class="quality-metric">
                        <div class="metric-value-xl" style="color:#2563eb">${sample.qualityScore.overall}%</div>
                        <div class="metric-label-sm">Overall Quality</div>
                    </div>
                    <div class="quality-metric">
                        <div class="metric-value-xl" style="color:#2563eb">${sample.qualityScore.completeness}%</div>
                        <div class="metric-label-sm">Completeness</div>
                    </div>
                    <div class="quality-metric">
                        <div class="metric-value-xl" style="color:#2563eb">${sample.qualityScore.accuracy}%</div>
                        <div class="metric-label-sm">Accuracy</div>
                    </div>
                    <div class="quality-metric">
                        <div class="metric-value-xl" style="color:#2563eb">${sample.qualityScore.relevance}%</div>
                        <div class="metric-label-sm">Relevance</div>
                    </div>
                </div>

                <div class="answer-section">
                    <h3 class="section-title">üí° Áµ±ÂêàÂõûÁ≠î</h3>
                    <div class="answer-content">${sample.answer.summary.replace(/\n/g, '<br>')}</div>
                </div>

                <div class="two-column-grid">
                    <div class="info-box">
                        <h4 class="info-title">üîß ÊäÄË°ìËÄÖÂêë„Åë</h4>
                        <p class="info-text">${sample.answer.technicalSummary}</p>
                    </div>
                    <div class="info-box">
                        <h4 class="info-title">üë§ ‰∏ÄËà¨Âêë„Åë</h4>
                        <p class="info-text">${sample.answer.userSummary}</p>
                    </div>
                </div>

                <div class="automation-box">
                    <h4 class="automation-title">‚öôÔ∏è Ëá™ÂãïÂåñÊèêÊ°à</h4>
                    <p class="automation-text">${sample.answer.improvementSuggestions}</p>
                    <div class="automation-score">
                        <div class="automation-value">${sample.answer.automationPotential}%</div>
                        <div class="automation-label">Automation Potential</div>
                    </div>
                </div>
            `;
        }

        function toggleAI(el) { el.classList.toggle('selected'); }
        function navigate(page) {
            const event = new Event('click');
            event.target = document.querySelector(`[data-page="${page}"]`);
            document.querySelector(`[data-page="${page}"]`).dispatchEvent(event);
        }
        function createTicket(e) {
            e.preventDefault();
            console.log('‚úÖ „ÉÅ„Ç±„ÉÉ„Éà‰ΩúÊàê');
            alert('‚úÖ „ÉÅ„Ç±„ÉÉ„Éà„Çí‰ΩúÊàê„Åó„Åæ„Åó„ÅüÔºÅ\n\nËá™ÂãïÂÆüË°å:\n‚Ä¢ ÂÑ™ÂÖàÂ∫¶Ëá™ÂãïË®àÁÆó\n‚Ä¢ SLAÊúüÈôêË®≠ÂÆö\n‚Ä¢ ITSMÂàÜÈ°û\n‚Ä¢ Â±•Ê≠¥Ë®òÈå≤');
            navigate('my-tickets');
        }
        function editTicket(id) { console.log('Á∑®ÈõÜ:', id); alert('Á∑®ÈõÜÊ©üËÉΩÔºàÂÆüË£Ö‰∏≠Ôºâ'); }
        function deleteTicket(id) {
            const ticket = SAMPLE_TICKETS.find(t => t.ticket_id === id);
            if (confirm(`„ÉÅ„Ç±„ÉÉ„Éà #${ticket.ticket_number} „ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü`)) {
                console.log('ÂâäÈô§:', id);
                alert('ÂâäÈô§„Åó„Åæ„Åó„Åü');
            }
        }
        function approve(id) { console.log('ÊâøË™ç:', id); alert('‚úÖ ÊâøË™ç„Åó„Åæ„Åó„Åü\n\nSODÊ§úË®º: ‚úÖ\nÂ±•Ê≠¥Ë®òÈå≤: ‚úÖ'); }
        function reject(id) { console.log('Âç¥‰∏ã:', id); alert('‚ùå Âç¥‰∏ã„Åó„Åæ„Åó„Åü'); }
        function executeM365(id) { console.log('M365ÂÆüÊñΩ:', id); alert('üöÄ M365Êìç‰Ωú„ÇíÂÆüÊñΩ\n\n‚úÖ ÊâøË™çÊ∏à„Åø\n‚úÖ SODÊ§úË®ºOK\n‚úÖ Áõ£Êüª„É≠„Ç∞Ë®òÈå≤'); }

        // ÂàùÊúüÂåñ
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üì± „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥ÂàùÊúüÂåñÂÆå‰∫Ü');
            loadPage('dashboard');
        });
    </script>
</body>
</html>
