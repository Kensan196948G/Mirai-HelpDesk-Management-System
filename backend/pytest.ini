[pytest]
# Pytest configuration for Mirai HelpDesk Management System

# テストディレクトリ
testpaths = tests

# Pythonパス
pythonpath = .

# デフォルトオプション
addopts =
    # 詳細出力
    -v
    # テスト失敗時の詳細表示
    --tb=short
    # カバレッジ計測
    --cov=app
    --cov-report=term-missing
    --cov-report=html:htmlcov
    # 警告を表示
    -W ignore::DeprecationWarning
    # 非同期テストのサポート
    --asyncio-mode=auto

# テストファイルパターン
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# マーカー定義
markers =
    slow: 実行に時間がかかるテスト
    integration: 統合テスト
    unit: ユニットテスト
    auth: 認証関連のテスト
    tickets: チケット関連のテスト
    m365: Microsoft 365関連のテスト
    sla: SLA関連のテスト

# カバレッジ対象から除外するファイル
# (設定ファイル、テストファイルなど)

# ログレベル
log_cli = false
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# 非同期テストの設定
asyncio_mode = auto
asyncio_default_fixture_loop_scope = function
