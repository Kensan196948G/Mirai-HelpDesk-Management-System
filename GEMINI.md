# GEMINI.md: Mirai ヘルプデスク管理システム

このドキュメントは、将来の開発と対話のために「Mirai ヘルプデスク管理システム」プロジェクトの包括的な概要を提供します。

## 1. プロジェクト概要

これは「Mirai ヘルプデスク管理システム」を作成するための**コードプロジェクト**です。その主な目的は、社内ITヘルプデスク業務を一元化および標準化し、特にMicrosoft 365（M365）関連のサービス要求とインシデントの管理に重点を置くことです。

このプロジェクトは、断片化したコミュニケーション（メール、チャット、口頭）、M365管理タスクの監査証跡の欠如、標準化された効率的なサポートプロセスの必要性といった課題を解決することを目指しています。

完全なシステムは `ヘルプデスク運用システム 要件定義・詳細仕様書.md` ドキュメントで指定されており、以下の内容を含みます：
-   **チケット管理:** インシデントとサービス要求を追跡するための一元化されたシステム。
-   **M365 ヘルプデスク:** 一般的なM365タスク（ライセンス管理、権限変更、ユーザーのオンボーディング/オフボーディングなど）のためのテンプレート化され、監査されたワークフロー。
-   **ロールベースのアクセス制御（RBAC）:** `Requester`、`Agent`、`M365 Operator`、`Manager`などの役割に応じた異なるインターフェースと権限。
-   **ナレッジベース:** FAQや自己解決策のためのリポジトリ。
-   **レポート & KPI:** サービスレベル契約（SLA）とパフォーマンス指標を追跡するためのダッシュボード。

`WebUI-Sample` ディレクトリには、素のHTML、CSS、JavaScriptで構築された、忠実度の高いインタラクティブなフロントエンドプロトタイプが含まれています。

## 2. 技術とアーキテクチャ

-   **現在のプロトタイプ（フロントエンド）:**
    -   **フレームワーク:** なし（素のJavaScript、HTML5、CSS3）。DOMにコンテンツを動的にレンダリングすることにより、シングルページアプリケーション（SPA）として動作します。
    -   **スタイリング:** テーマ設定のためにカスタムプロパティ（変数）を使用した素のCSS。`WebUI-Sample/css/common.css` を参照。
    -   **ロジック:** 主なアプリケーションロジックは `WebUI-Sample/js/app.js` にあり、ルーティングとビューのレンダリングを処理します。
    -   **データ:** サンプルデータは `WebUI-Sample/js/common.js` にハードコーディングされています。バックエンドには接続しません。

-   **ターゲットアーキテクチャ（仕様書に基づく）:**
    -   **フロントエンド:** 製品版ではReactやVue.jsのような最新のJavaScriptフレームワークが推奨されます。
    -   **バックエンド:** ビジネスロジック、データ永続化、認証を処理するためのREST API。
    -   **データベース:** チケット、ユーザー、ログ、その他のエンティティを保存するためのリレーショナルデータベース（スキーマは仕様書で詳述）。
    -   **統合:** M365の自動化とデータ取得のためのMicrosoft Graph API。
    -   **認証:** Entra ID（旧Azure AD）によるシングルサインオン（SSO）。

## 3. プロジェクトのビルドと実行

### Web UI プロトタイプの実行

現在のプロトタイプには**ビルドプロセスは不要**です。

1.  **ブラウザで `index.html` ファイルを開くだけです。**
    ```
    WebUI-Sample/index.html
    ```
2.  **アプリケーションを操作します。** ダッシュボードの下部にあるボタンを使用して異なるユーザーロールを切り替え、さまざまな視点からUIを体験できます。

## 4. 開発規約

-   **プロジェクトドキュメント:** 要件、データモデル、API設計に関する主要な情報源は `ヘルプデスク運用システム 要件定義・詳細仕様書.md` ファイルです。
-   **コード構造:** UIプロトタイプのコードは、関心事によって明確に分離されています：
    -   `index.html`: メインアプリケーションのシェル。
    -   `css/common.css`: すべてのアプリケーションスタイル。
    -   `js/app.js`: アプリケーションロジック、ページレンダリング、ナビゲーション。
    -   `js/common.js`: サンプルデータとユーティリティ関数。
-   **ユーザーロール:** アプリケーションは `js/app.js` で定義された4つの主要なユーザーロール（`USER`, `AGENT`, `M365_OPERATOR`, `MANAGER`）を中心に構築されています。すべてのUI開発は、これらのロールの特定のニーズと権限を考慮する必要があります。
-   **API設計:** ターゲットREST APIの構造は仕様書（セクション9）で概説されています。将来のバックエンド開発はこの設計に従う必要があります。

## 5. 主要ファイル

-   `ヘルプデスク運用システム 要件定義・詳細仕様書.md`: **（重要）** システム全体の完全な要件と詳細仕様。
-   `WebUI-Sample/README.md`: UIプロトタイプの目的と機能について説明します。
-   `WebUI-Sample/index.html`: Webアプリケーションのエントリーポイント。
-   `WebUI-Sample/js/app.js`: SPAの動作を制御するコアJavaScriptファイル。
-   `WebUI-Sample/js/common.js`: UIを構成するすべてのサンプルデータが含まれており、システムが処理する問題の種類に関する優れたコンテキストを提供します。
-   `WebUI-Sample/css/common.css`: アプリケーションの視覚的なスタイルを定義します。